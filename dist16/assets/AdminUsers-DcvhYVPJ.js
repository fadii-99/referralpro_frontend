import{j as e,f as v,D as N,r as c,S as w}from"./index-CeKQ7924.js";import{P as _}from"./Pagination-DDniSJB2.js";const g=({label:t,color:r})=>e.jsx("span",{className:`inline-flex items-center w-fit px-3 py-1 rounded-lg text-nowrap text-xs sm:text-sm font-medium ${r}`,children:t}),m=(t,r="—")=>t==null||typeof t=="string"&&t.trim()===""?r:t,A=t=>t&&t.charAt(0).toUpperCase()+t.slice(1),P=t=>{const r=t.toLowerCase();return r==="superadmin"?"text-red-700 bg-red-50":r==="company"?"text-blue-700 bg-blue-50":r==="employee"?"text-purple-700 bg-purple-50":r==="solo"?"text-amber-700 bg-amber-50":"text-gray-700 bg-gray-100"},S=({user:t,onDelete:r,deleting:s=!1})=>{const f=String(m(t?.name,"—")),u=String(m(t?.email,"—")),d=String(m(t?.company_name,"")),n=String(m(t?.phone,"—")),b=!!t?.is_active,h=!!t?.is_verified,i=b?{label:"Activated",color:"text-emerald-700 bg-emerald-50"}:{label:"Inactive",color:"text-amber-700 bg-amber-50"},l=h?{label:"Verified",color:"text-blue-700 bg-blue-50"}:{label:"Unverified",color:"text-red-700 bg-red-50"},o=String(m(t?.role,"—")),x=o.toLowerCase()==="superadmin"?"Admin":A(o),p=P(o);return e.jsxs("div",{className:`grid min-w-[1100px]\r
                 grid-cols-[1.2fr_1.4fr_1.2fr_0.9fr_1.1fr_1fr_0.8fr_auto]\r
                 items-center bg-white rounded-2xl px-6 py-3 border border-black/5 \r
                 shadow-sm hover:shadow-md transition`,children:[e.jsx("div",{className:"text-gray-800 font-medium md:text-sm text-xs truncate",children:f}),e.jsx("div",{className:"text-gray-700 md:text-sm text-xs truncate",children:u}),e.jsx("div",{className:"md:text-sm text-xs truncate",children:d?e.jsx("span",{className:"text-gray-700",children:d}):e.jsx(g,{label:"None",color:"text-gray-700 bg-gray-100"})}),e.jsx("div",{className:"md:text-sm text-xs",children:e.jsx(g,{label:i.label,color:i.color})}),e.jsx("div",{className:"md:text-sm text-xs",children:e.jsx(g,{label:l.label,color:l.color})}),e.jsx("div",{className:"text-gray-700 md:text-sm text-xs truncate",children:n}),e.jsx("div",{className:"md:text-sm text-xs",children:e.jsx(g,{label:x,color:p})}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"button",title:"Delete user",disabled:s,onClick:()=>r(t?.id),className:`h-9 w-9 rounded-lg border border-black/5 bg-white flex items-center justify-center shadow-sm
            ${s?"opacity-60 cursor-not-allowed":"hover:bg-red-50"}`,children:e.jsx(v,{className:"text-red-500 text-lg"})})})]})},E=()=>{const{loading:t,error:r,data:s,loadUsers:f}=N(),[u,d]=c.useState([]),[n,b]=c.useState(1);c.useEffect(()=>{f()},[f]);const h=c.useMemo(()=>s?Array.isArray(s?.users)?s.users:Array.isArray(s?.data?.users)?s.data.users:[]:[],[s]);c.useEffect(()=>{d(h)},[h]);const i=7,l=Math.max(1,Math.ceil(u.length/i)),o=(n-1)*i,x=u.slice(o,o+i);c.useEffect(()=>{n>l&&b(l)},[l,n]);const p=a=>{a==null||!window.confirm("Delete this user locally (no API)?")||(d(j=>j.filter(y=>y.id!==a)),console.log("[AdminUsers] local delete id:",a))};return e.jsxs("div",{className:"sm:p-6 p-4 flex flex-col min-h-screen",children:[e.jsx("div",{className:"flex items-center justify-between pb-4",children:e.jsx("h2",{className:"md:text-2xl text-xl font-semibold text-primary-blue",children:"User Management"})}),r&&e.jsx("div",{className:"mb-3 text-sm text-red-600 bg-red-50 border border-red-100 px-3 py-2 rounded-lg",children:r}),e.jsx("div",{className:"bg-gray-50 rounded-xl border border-black/5 overflow-x-auto",children:e.jsxs("div",{className:`grid min-w-[1100px]\r
                     grid-cols-[1.2fr_1.4fr_1.2fr_0.9fr_1.1fr_1fr_0.8fr_auto]\r
                     px-6 py-3 text-xs sm:text-sm font-semibold text-gray-600`,children:[e.jsx("div",{children:"Name"}),e.jsx("div",{children:"Email"}),e.jsx("div",{children:"Company"}),e.jsx("div",{children:"Status"}),e.jsx("div",{children:"Verification"}),e.jsx("div",{children:"Phone"}),e.jsx("div",{children:"Role"}),e.jsx("div",{className:"text-right",children:"Action"})]})}),e.jsx("div",{className:"overflow-x-auto space-y-2 mt-2",children:t?e.jsx("div",{className:"py-6 flex justify-center",children:e.jsx(w,{})}):x.length===0?e.jsx("div",{className:"text-sm p-8 text-center text-gray-500 bg-white rounded-xl border border-black/5",children:"No users found."}):x.map(a=>e.jsx(S,{user:a,onDelete:p},a.id))}),x.length>0&&!t&&e.jsx("div",{className:"mt-auto pt-6 flex justify-end",children:e.jsx(_,{current:n,totalPages:l,onChange:b})})]})};export{E as default};
