import{u as T,r as h,R as k,j as t}from"./index-BWkKWa2F.js";import{S as I}from"./SideDesign-6w4rZga0.js";import{B as M}from"./Button-DKZIAQRV.js";import{M as L}from"./MultiStepHeader-HPd8r49X.js";const P={starter:0,growth:1},x={starter:{name:"Starter",seatsLabel:"5 seats",baseSeats:5,monthlyPrice:99},growth:{name:"Growth",seatsLabel:"25 seats",baseSeats:25,monthlyPrice:299}},N=c=>`$${Math.round(c).toLocaleString()}`,R=c=>Math.round(c*12*.9);function g(c,o,u,d=!1){if(c==="custom"){const b=(u||5)*20,l=o==="monthly"?b:o==="yearly"?b*12:0;return{total:l,display:l?`${N(l)}${o==="monthly"?"/mon":"/yr"}`:"—",currency:"USD"}}if(d&&c==="starter")return{total:o==="monthly"?20:240,display:o==="monthly"?"$20/mon":"$240/yr",currency:"USD"};const i=x[c],n=Math.ceil(i.monthlyPrice/i.baseSeats)*i.baseSeats-1,y=o==="monthly"?n:o==="yearly"?R(n):0;return{total:y,display:y?`${N(y)}${o==="monthly"?"/mon":"/yr"}`:"—",currency:"USD"}}const U=()=>{const c=T(),o=h.useContext(k);if(!o)throw new Error("SubscriptionPlan must be used within RegistrationProvider");const{registrationData:u,setRegistrationData:d}=o,i=u.profileType==="contractor",[n,y]=h.useState(u.subscriptionBilling||"monthly"),[s,b]=h.useState(u.subscriptionPlanId),[l,$]=h.useState(u.subscriptionPlanId===3&&u.subscriptionSeats||5),[m,v]=h.useState(u.subscriptionPlanId===3?u.subscriptionBilling:""),S=e=>{y(e),(s===null||s===3)&&b(0);const r=s===1?"growth":"starter",a=g(r,e,l,i);d(p=>({...p,subscriptionBilling:e,subscriptionPlanId:s===1?1:0,subscriptionSeats:i&&r==="starter"?1:x[r].baseSeats,subscriptionCurrency:a.currency,subscriptionTotal:a.total,subscriptionTotalDisplay:a.display}))},w=e=>{v(e);const r=g("custom",e,l);d(a=>({...a,subscriptionBilling:e,subscriptionPlanId:3,subscriptionSeats:l,subscriptionCurrency:r.currency,subscriptionTotal:r.total,subscriptionTotalDisplay:r.display}))},C=e=>{if(e==="custom"){b(3),v(""),d(p=>({...p,subscriptionPlanId:3,subscriptionSeats:l,subscriptionBilling:"",subscriptionCurrency:"USD",subscriptionTotal:0,subscriptionTotalDisplay:"—"}));return}const r=P[e],a=g(e,n,l,i);b(r),d(p=>({...p,subscriptionBilling:n,subscriptionPlanId:r,subscriptionSeats:i&&e==="starter"?1:x[e].baseSeats,subscriptionCurrency:a.currency,subscriptionTotal:a.total,subscriptionTotalDisplay:a.display}))},B=()=>{s!==null&&(s===3&&(!l||!m)||c("/PaymentMethod"))},j=({id:e})=>{const r=x[e],a=g(e,n,l,i),p=P[e],f=s===p,D=i&&e==="starter"?"1 seat":r.seatsLabel;return t.jsxs("button",{type:"button",onClick:()=>C(e),className:["relative w-full rounded-2xl sm:px-5 px-3 sm:py-6 py-4 text-left border transition-shadow",f?"bg-primary-purple text-white border-primary-purple shadow-lg":"bg-white text-primary-blue border-primary-blue/20 hover:shadow-md","shadow-[0_8px_28px_rgba(0,0,0,0.08)]"].join(" "),children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold opacity-90",children:r.name}),t.jsx("div",{className:"mt-1 text-[11px] opacity-70",children:D})]}),t.jsx("div",{className:["w-5 h-5 rounded-full border flex items-center justify-center",f?"border-white bg-white/20":"border-primary-blue/30"].join(" "),"aria-hidden":!0,children:f?t.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-white"}):null})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("span",{className:"text-3xl font-bold tracking-tight",children:a.display.split("/")[0]}),t.jsx("span",{className:"ml-1 text-sm opacity-80",children:n==="monthly"?"/mon":"/yr"})]}),t.jsx("div",{className:"mt-2 text-xs opacity-70",children:i&&e==="starter"?"Single seat plan for contractors":n==="yearly"?"10% off with annual prepayment":`~${N(Math.ceil(r.monthlyPrice/r.baseSeats))}/seat baseline`})]})};return t.jsxs("div",{className:"grid md:grid-cols-5 w-full min-h-screen",children:[t.jsx(I,{}),t.jsxs("div",{className:"md:col-span-3 flex flex-col bg-[#F4F2FA]",children:[t.jsx("div",{className:"sticky top-5 z-30 backdrop-blur w-full max-w-lg mx-auto",children:t.jsx("div",{className:"px-4",children:t.jsx(L,{title:"Subscription Plan",current:5,total:6,onBack:()=>c(-1)})})}),t.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:mt-0 mt-6",children:t.jsxs("div",{className:"w-full max-w-lg",children:[t.jsxs("div",{className:"flex items-center gap-6 text-sm font-semibold text-primary-blue mb-3",children:[t.jsxs("button",{type:"button",onClick:()=>S("monthly"),className:`relative pb-2 ${n==="monthly"&&s!==3?"text-primary-purple":"text-primary-blue/70"}`,children:["Monthly",n==="monthly"&&s!==3&&t.jsx("span",{className:"absolute left-0 -bottom-[2px] h-0.5 w-full bg-primary-purple rounded-full"})]}),t.jsxs("button",{type:"button",onClick:()=>S("yearly"),className:`relative pb-2 ${n==="yearly"&&s!==3?"text-primary-purple":"text-primary-blue/70"}`,children:["Yearly",n==="yearly"&&s!==3&&t.jsx("span",{className:"absolute left-0 -bottom-[2px] h-0.5 w-full bg-primary-purple rounded-full"})]}),t.jsxs("button",{type:"button",onClick:()=>C("custom"),className:`relative pb-2 ${s===3?"text-primary-purple":"text-primary-blue/70"}`,children:["Custom",s===3&&t.jsx("span",{className:"absolute left-0 -bottom-[2px] h-0.5 w-full bg-primary-purple rounded-full"})]})]}),s===3&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-primary-blue mb-2 mt-6",children:"Select custom seats"}),t.jsx("label",{className:"block text-xs text-primary-blue/70 mb-1",children:"Per seat: $20"}),t.jsx("input",{type:"range",min:5,max:500,step:5,value:l,onChange:e=>{const r=Number(e.target.value);$(r);const a=g("custom",m,r);d(p=>({...p,subscriptionSeats:r,subscriptionTotal:a.total,subscriptionTotalDisplay:a.display,subscriptionCurrency:a.currency,subscriptionPlanId:3,subscriptionBilling:m}))},className:"w-full accent-primary-purple"}),t.jsxs("div",{className:"flex justify-between text-xs text-primary-blue font-semibold mt-1 mb-6",children:[t.jsxs("span",{children:["Seats: ",l]}),t.jsxs("span",{children:["Total:"," ",m==="monthly"?`$${l*20}/mon`:m==="yearly"?`$${l*20*12}/yr`:"—"]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-primary-blue font-semibold mb-2",children:"Duration"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("button",{type:"button",onClick:()=>w("monthly"),className:`w-full rounded-xl sm:px-4 px-3 py-3 border text-left transition-all ${m==="monthly"?"bg-white border-primary-purple ring-2 ring-primary-purple/30":"bg-white border-primary-blue/20 hover:shadow-sm"}`,children:"Monthly"}),t.jsx("button",{type:"button",onClick:()=>w("yearly"),className:`w-full rounded-xl sm:px-4 px-3 py-3 border text-left transition-all ${m==="yearly"?"bg-white border-primary-purple ring-2 ring-primary-purple/30":"bg-white border-primary-blue/20 hover:shadow-sm"}`,children:"Yearly"})]})]})]}),s!==3&&t.jsx("div",{className:"grid grid-cols-2 gap-4",children:i?t.jsx(j,{id:"starter"}):t.jsxs(t.Fragment,{children:[t.jsx(j,{id:"starter"}),t.jsx(j,{id:"growth"})]})}),t.jsxs("div",{className:"mt-6",children:[t.jsx("div",{className:"text-xs text-primary-blue font-semibold mb-2",children:"Your selection"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsx("div",{className:"text-primary-blue/80",children:"Billing"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:s===3?m||"—":n}),t.jsx("div",{className:"text-primary-blue/80",children:"Plan"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:s===0?"Starter":s===1?"Growth":"Custom"}),t.jsx("div",{className:"text-primary-blue/80",children:"Seats"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:s===3?`Custom seats (${l})`:s===null?"—":s===0?i?"1":x.starter.baseSeats:x.growth.baseSeats}),t.jsx("div",{className:"text-primary-blue/80",children:"Amount"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:u.subscriptionTotalDisplay||"—"})]})]}),t.jsx("div",{className:"mt-6",children:t.jsx(M,{text:"Next : Add Card Details",onClick:B,disabled:s===null||s===3&&(!l||!m)})})]})})]})]})};export{U as default};
