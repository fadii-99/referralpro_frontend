import{u as y,r as c,j as e}from"./index-Cw_ebVUy.js";import{S as w}from"./SideDesign-CmZ2Ri7H.js";import{B as b}from"./Button-D7uuoXZF.js";import{l as j,A as N,a as v}from"./index-P-V7aj7s.js";import{m as k}from"./sms-DiCkCrsD.js";import{L as C,y as p}from"./ReactToastify-CdOU4tch.js";const S="/api",F=()=>{const u=y(),[o,x]=c.useState({email:"",password:""}),[i,g]=c.useState(!1),[n,m]=c.useState(!1),d=t=>{const{name:a,value:r}=t.target;x(l=>({...l,[a]:r}))},h=async t=>{if(t.preventDefault(),n)return;m(!0);const a=new FormData;a.append("email",o.email.trim()),a.append("password",o.password),a.append("type","web"),a.append("role","admin");try{const r=await fetch(`${S}/auth/login/`,{method:"POST",body:a}),l=await r.text();let s=null;try{s=l?JSON.parse(l):null}catch{}if(!r.ok){const f=s&&typeof s!="string"&&(s.error||s.detail||s.message)||(typeof s=="string"?s:l||"Invalid credentials");p.error(f);return}s?.tokens?.access&&localStorage.setItem("adminAccessToken",s.tokens.access),u("/Admin")}catch(r){console.error("[admin login] network error:",r),p.error("Network error. Try again.")}finally{m(!1)}};return e.jsxs("div",{className:"grid md:grid-cols-5 w-full min-h-screen",children:[e.jsx(w,{}),e.jsx("div",{className:"md:col-span-3 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-lg",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 mb-8",children:[e.jsx("h1",{className:"text-primary-blue font-semibold sm:text-4xt text-3xl",children:"Admin Login"}),e.jsx("p",{className:"text-xs text-gray-700 text-center",children:"Enter your admin credentials to log in"})]}),e.jsxs("form",{className:"flex flex-col gap-5",autoComplete:"off",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-xs text-primary-blue font-medium mb-2",children:["Email Address",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2",children:e.jsx("img",{src:k,alt:"email",className:"h-5 w-5"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,placeholder:"Enter your email",value:o.email,onChange:d,autoComplete:"email",className:"w-full pl-14 pr-4 py-5 rounded-full bg-white border border-gray-200 text-xs text-gray-800 placeholder-gray-400 outline-none focus:ring-2 focus:ring-primary-blue/20 focus:border-primary-blue/50"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"password",className:"block text-xs text-primary-blue font-medium mb-2",children:["Password",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2",children:e.jsx("img",{src:j,alt:"password",className:"h-5 w-5"})}),e.jsx("button",{type:"button","aria-label":i?"Hide password":"Show password",onClick:()=>g(t=>!t),className:"absolute right-4 top-1/2 -translate-y-1/2 text-primary-purple hover:text-primary-purple/90 transition",children:i?e.jsx(N,{className:"h-5 w-5"}):e.jsx(v,{className:"h-5 w-5"})}),e.jsx("input",{id:"password",name:"password",type:i?"text":"password",required:!0,placeholder:"Enter your password",value:o.password,onChange:d,autoComplete:"current-password",className:"w-full pl-14 pr-12 py-5 rounded-full bg-white border border-gray-200 text-xs text-gray-800 placeholder-gray-400 outline-none focus:ring-2 focus:ring-primary-blue/20 focus:border-primary-blue/50"})]})]}),e.jsx(b,{text:n?"Logging in...":"Login",disabled:n,onClick:h})]})]})}),e.jsx(C,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})]})};export{F as default};
