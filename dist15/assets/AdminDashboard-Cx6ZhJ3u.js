import{r as o,j as e}from"./index-0Q9RoQHO.js";import{D as d}from"./DashboardCard-B3hOZeJs.js";const u="/api",h="/super/dashboard/",j=()=>{const[x,i]=o.useState(null),[t,c]=o.useState(!1),[m,n]=o.useState(null);o.useEffect(()=>{(async()=>{c(!0),n(null);try{const l=localStorage.getItem("adminAccessToken"),a=await fetch(`${u}${h}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:l?`Bearer ${l}`:""}}),r=await a.json().catch(()=>({success:!1}));if(console.log("[Admin Dashboard API Response]:",r),a.ok)i(r);else{const f=r?.error||(a.status===401?"Unauthorized. Please log in again.":a.status===403?"Forbidden. Superadmin access required.":`Request failed with status ${a.status}`);n(f),i(r||null)}}catch(l){console.error("Network error (Admin Dashboard):",l),n("Network error while fetching admin dashboard.")}finally{c(!1)}})()},[]);const s=x?.data;return e.jsxs("div",{className:"sm:p-8 p-4 flex flex-col gap-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-medium text-gray-500",children:["Admin Dashboard ",e.jsx("br",{}),e.jsx("span",{className:"text-3xl font-bold text-primary-blue",children:"System Overview"})]}),t?e.jsx("span",{className:"text-xs text-gray-400",children:"Loading…"}):m?e.jsx("span",{className:"text-xs text-red-500",children:m}):null]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(d,{title:"Active Users",value:t?"...":typeof s?.active_users=="number"?s.active_users.toLocaleString():"—"}),e.jsx(d,{title:"Total Referrals",value:t?"...":typeof s?.total_referrals=="number"?s.total_referrals.toLocaleString():"—"}),e.jsx(d,{title:"Revenue",value:t?"...":typeof s?.total_revenue=="number"?`$${s.total_revenue.toLocaleString()}`:"—"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 lg:gap-6 gap-6"}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm",children:[e.jsx("h3",{className:"sm:text-xl text-md font-semibold text-primary-blue mb-6",children:"System Health"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-[#f9f9ff] rounded-lg p-5 shadow-sm flex flex-col border",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Total Points"}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-sky-400"})]}),e.jsx("p",{className:"text-2xl font-bold text-[#0b0d3b] mt-2",children:t?"...":typeof s?.total_points=="number"?s.total_points.toLocaleString():"—"})]}),e.jsxs("div",{className:"bg-[#f9f9ff] rounded-lg p-5 shadow-sm flex flex-col border",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Total Cash Out"}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-sky-400"})]}),e.jsx("p",{className:"text-2xl font-bold text-[#0b0d3b] mt-2",children:t?"...":typeof s?.total_cashout=="number"?`$${s.total_cashout.toLocaleString()}`:"—"})]}),e.jsxs("div",{className:"bg-[#f9f9ff] rounded-lg p-5 shadow-sm flex flex-col border",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Total Active Subscription"}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-sky-400"})]}),e.jsx("p",{className:"text-2xl font-bold text-[#0b0d3b] mt-2",children:t?"...":typeof s?.active_subscribers=="number"?s.active_subscribers.toLocaleString():"—"})]}),e.jsxs("div",{className:"bg-[#f9f9ff] rounded-lg p-5 shadow-sm flex flex-col border",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-600",children:"Cancelled Subscriptions"}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-sky-400"})]}),e.jsx("p",{className:"text-2xl font-bold text-[#0b0d3b] mt-2",children:t?"...":typeof s?.cancelled_subscriptions=="number"?s.cancelled_subscriptions.toLocaleString():"—"})]})]})]})]})};export{j as default};
