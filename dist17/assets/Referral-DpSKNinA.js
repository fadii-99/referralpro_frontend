import{j as e,m as y,n as N,r as i,u as v,e as w,l as _,S as C}from"./index-soKfQvfx.js";import{P as R}from"./Pagination-DbqJxGWb.js";const u=["text-rose-700 bg-rose-50","text-blue-700 bg-blue-50","text-amber-700 bg-amber-50","text-emerald-700 bg-emerald-50","text-purple-700 bg-purple-50","text-gray-700 bg-gray-100"],P=t=>{let r=0;for(let a=0;a<t.length;a++)r=t.charCodeAt(a)+((r<<5)-r);return u[Math.abs(r)%u.length]},S=({status:t})=>{const a=(t||"").trim().toLowerCase().replace(/_/g," ").replace(/\s+/g," "),n={"in progress":"text-violet-500 bg-violet-50",pending:"text-amber-500 bg-amber-50","friend opted in":"text-blue-500 bg-blue-50",completed:"text-emerald-700 bg-emerald-50",cancelled:"text-rose-700 bg-rose-50"}[a]||"text-gray-700 bg-gray-100";return e.jsx("span",{className:`inline-flex items-center w-fit px-3 py-1 rounded-lg text-nowrap text-xs sm:text-sm font-medium capitalize ${n}`,children:t})},L=({urgency:t})=>{const a={urgent:"text-rose-700 bg-rose-50",normal:"text-blue-700 bg-blue-50",medium:"text-amber-700 bg-amber-50"}[(t||"").toLowerCase()]||P(t||"");return e.jsx("span",{className:`inline-flex items-center w-fit px-3 py-1 rounded-lg text-nowrap text-xs sm:text-sm font-medium capitalize ${a}`,children:t})},k=({label:t})=>{const r=(t||"").trim(),a=r.toLowerCase();let l="text-blue-700 bg-blue-50",n=r||"none";return a==="self"?(l="text-amber-500 bg-amber-50",n="self"):(a==="none"||r==="")&&(l="text-rose-700 bg-rose-50",n="-"),e.jsx("span",{className:`inline-flex items-center w-fit px-3 py-1 rounded-lg text-nowrap text-xs sm:text-sm font-medium capitalize ${l}`,children:n})},z=({referral:t,onClick:r,onView:a})=>{const l=t.assigned_to_name||"none";return e.jsxs("div",{onClick:r,className:`grid grid-cols-[160px_200px_1fr_1fr_1fr_1fr_60px] min-w-[900px] \r
               items-center bg-white rounded-2xl px-6 py-3 border border-black/5 \r
               shadow-sm cursor-pointer hover:shadow-md transition`,children:[e.jsx("div",{className:"font-medium text-gray-700 md:text-sm text-xs text-left",children:t.reference_id}),e.jsx("div",{className:"font-medium text-gray-700 md:text-sm text-xs text-left",children:t.referred_to_name}),e.jsx("div",{className:"text-gray-600 md:text-sm text-xs text-left",children:t.industry}),e.jsx("div",{className:"md:text-sm text-xs text-left",children:e.jsx(k,{label:l})}),e.jsx(S,{status:t.status}),e.jsx(L,{urgency:t.urgency}),e.jsx("div",{className:"flex justify-end pr-2",onClick:n=>n.stopPropagation(),children:e.jsx("button",{type:"button","aria-label":"View",className:"text-primary-purple hover:opacity-80",onClick:a,children:e.jsx(y,{className:"text-lg"})})})]})},M=()=>{const{referrals:t,loading:r,loadReferrals:a}=N(),[l,n]=i.useState(1),b=v(),{user:m}=w(),p=i.useMemo(()=>{const s=(m?.biz_type||"").trim().toLowerCase();return/^(sole|sole\s*trader|solo|sole_trader)$/i.test(s)},[m?.biz_type]);i.useEffect(()=>{a()},[a]);const x=8,o=Math.max(1,Math.ceil(t.length/x)),f=(l-1)*x,c=t.slice(f,f+x);i.useEffect(()=>{l>o&&n(o)},[o,l]);const h=s=>s.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),g=s=>{localStorage.setItem("selectedReferralId",s.reference_id),localStorage.setItem("selectedId",s.id);const j=h(s.referred_to_name);b(`/Dashboard/Referral/${j}`)},d=i.useMemo(()=>p?c.map(s=>({...s,assigned_to_name:"self"})):c,[c,p]);return e.jsxs("div",{className:"sm:p-6 p-4 flex flex-col min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4",children:[e.jsx("h2",{className:"md:text-2xl text-xl font-semibold text-primary-blue",children:"Company Referrals List"}),e.jsx("div",{className:"flex flex-row items-center gap-3",children:e.jsx("button",{className:"h-10 w-10 rounded-xl bg-white border border-black/5 shadow-sm flex items-center justify-center",children:e.jsx(_,{className:"text-primary-purple text-lg"})})})]}),e.jsxs("div",{className:"flex-1 flex flex-col space-y-4",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("div",{className:`grid grid-cols-[160px_200px_1fr_1fr_1fr_1fr_60px] min-w-[900px]\r
                       px-6 py-3 text-xs sm:text-sm font-semibold text-gray-600 \r
                       bg-gray-50 rounded-xl`,children:[e.jsx("div",{className:"text-left",children:"ID"}),e.jsx("div",{className:"text-left",children:"Customer Name"}),e.jsx("div",{className:"text-left",children:"Service Type"}),e.jsx("div",{className:"text-left",children:"Assigned Rep"}),e.jsx("div",{className:"text-left",children:"Status"}),e.jsx("div",{className:"text-left",children:"Priority"}),e.jsx("div",{className:"text-right pr-2",children:"Actions"})]})}),e.jsx("div",{className:"overflow-x-auto space-y-2",children:r?e.jsx("div",{className:"py-6 flex justify-center",children:e.jsx(C,{})}):d.length===0?e.jsx("div",{className:"text-sm p-8 text-center text-gray-500",children:"No referrals found."}):d.map(s=>e.jsx(z,{referral:s,onClick:()=>g(s),onView:()=>g(s)},s.id))})]}),d.length>0&&!r&&e.jsx("div",{className:"mt-auto pt-6 flex justify-end",children:e.jsx(R,{current:l,totalPages:o,onChange:s=>n(s)})})]})};export{M as default};
