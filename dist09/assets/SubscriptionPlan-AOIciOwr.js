import{u as k,r as b,R as I,j as t}from"./index-CGjmr3OW.js";import{S as M}from"./SideDesign-BF3NaLyw.js";import{B as L}from"./Button-vl0ONvB8.js";import{M as R}from"./MultiStepHeader-D2tn3Jg9.js";const $={starter:0,growth:1},y={starter:{name:"Starter",seatsLabel:"5 seats",baseSeats:5,monthlyPrice:99},growth:{name:"Growth",seatsLabel:"25 seats",baseSeats:25,monthlyPrice:299}},v=c=>`$${Math.round(c).toLocaleString()}`,A=c=>Math.round(c*12*.9);function j(c,o,m,d=!1){if(c==="custom"){const x=(m||5)*20,g=o==="monthly"?x:o==="yearly"?x*12:0;return{total:g,display:g?`${v(g)}${o==="monthly"?"/mon":"/yr"}`:"—",currency:"USD"}}if(d&&c==="starter")return{total:o==="monthly"?20:240,display:o==="monthly"?"$20/mon":"$240/yr",currency:"USD"};const a=y[c],i=Math.ceil(a.monthlyPrice/a.baseSeats)*a.baseSeats-1,h=o==="monthly"?i:o==="yearly"?A(i):0;return{total:h,display:h?`${v(h)}${o==="monthly"?"/mon":"/yr"}`:"—",currency:"USD"}}const Y=()=>{const c=k(),o=b.useContext(I);if(!o)throw new Error("SubscriptionPlan must be used within RegistrationProvider");const{registrationData:m,setRegistrationData:d}=o,a=m.profileType==="contractor",[i,h]=b.useState(m.subscriptionBilling||"monthly"),[s,x]=b.useState(m.subscriptionPlanId),[g]=b.useState("stripe"),[n,B]=b.useState(m.subscriptionPlanId===3&&m.subscriptionSeats||5),[u,w]=b.useState(m.subscriptionPlanId===3?m.subscriptionBilling:""),S=e=>{h(e),(s===null||s===3)&&x(0);const r=s===1?"growth":"starter",l=j(r,e,n,a);d(p=>({...p,subscriptionBilling:e,subscriptionPlanId:s===1?1:0,subscriptionSeats:a&&r==="starter"?1:y[r].baseSeats,subscriptionCurrency:l.currency,subscriptionTotal:l.total,subscriptionTotalDisplay:l.display}))},P=e=>{w(e);const r=j("custom",e,n);d(l=>({...l,subscriptionBilling:e,subscriptionPlanId:3,subscriptionSeats:n,subscriptionCurrency:r.currency,subscriptionTotal:r.total,subscriptionTotalDisplay:r.display}))},C=e=>{if(e==="custom"){x(3),w(""),d(p=>({...p,subscriptionPlanId:3,subscriptionSeats:n,subscriptionBilling:"",subscriptionCurrency:"USD",subscriptionTotal:0,subscriptionTotalDisplay:"—"}));return}const r=$[e],l=j(e,i,n,a);x(r),d(p=>({...p,subscriptionBilling:i,subscriptionPlanId:r,subscriptionSeats:a&&e==="starter"?1:y[e].baseSeats,subscriptionCurrency:l.currency,subscriptionTotal:l.total,subscriptionTotalDisplay:l.display}))},D=()=>{s!==null&&(s===3&&(!n||!u)||c("/PaymentMethod"))},f=({id:e})=>{const r=y[e],l=j(e,i,n,a),p=$[e],N=s===p,T=a&&e==="starter"?"1 seat":r.seatsLabel;return t.jsxs("button",{type:"button",onClick:()=>C(e),className:["relative w-full rounded-2xl sm:px-5 px-3 sm:py-6 py-4 text-left border transition-shadow",N?"bg-primary-purple text-white border-primary-purple shadow-lg":"bg-white text-primary-blue border-primary-blue/20 hover:shadow-md","shadow-[0_8px_28px_rgba(0,0,0,0.08)]"].join(" "),children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-semibold opacity-90",children:r.name}),t.jsx("div",{className:"mt-1 text-[11px] opacity-70",children:T})]}),t.jsx("div",{className:["w-5 h-5 rounded-full border flex items-center justify-center",N?"border-white bg-white/20":"border-primary-blue/30"].join(" "),"aria-hidden":!0,children:N?t.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-white"}):null})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("span",{className:"text-3xl font-bold tracking-tight",children:l.display.split("/")[0]}),t.jsx("span",{className:"ml-1 text-sm opacity-80",children:i==="monthly"?"/mon":"/yr"})]}),t.jsx("div",{className:"mt-2 text-xs opacity-70",children:a&&e==="starter"?"Single seat plan for contractors":i==="yearly"?"10% off with annual prepayment":`~${v(Math.ceil(r.monthlyPrice/r.baseSeats))}/seat baseline`})]})};return t.jsxs("div",{className:"grid md:grid-cols-5 w-full min-h-screen",children:[t.jsx(M,{}),t.jsxs("div",{className:"md:col-span-3 flex flex-col bg-[#F4F2FA]",children:[t.jsx("div",{className:"sticky top-5 z-30 backdrop-blur w-full max-w-lg mx-auto",children:t.jsx("div",{className:"px-4",children:t.jsx(R,{title:"Subscription Plan",current:5,total:6,onBack:()=>c(-1)})})}),t.jsx("div",{className:"flex-1 flex items-center justify-center px-4 sm:mt-0 mt-6",children:t.jsxs("div",{className:"w-full max-w-lg",children:[t.jsxs("div",{className:"flex items-center gap-6 text-sm font-semibold text-primary-blue mb-3",children:[t.jsxs("button",{type:"button",onClick:()=>S("monthly"),className:`relative pb-2 ${i==="monthly"&&s!==3?"text-primary-purple":"text-primary-blue/70"}`,children:["Monthly",i==="monthly"&&s!==3&&t.jsx("span",{className:"absolute left-0 -bottom-[2px] h-0.5 w-full bg-primary-purple rounded-full"})]}),t.jsxs("button",{type:"button",onClick:()=>S("yearly"),className:`relative pb-2 ${i==="yearly"&&s!==3?"text-primary-purple":"text-primary-blue/70"}`,children:["Yearly",i==="yearly"&&s!==3&&t.jsx("span",{className:"absolute left-0 -bottom-[2px] h-0.5 w-full bg-primary-purple rounded-full"})]}),t.jsxs("button",{type:"button",onClick:()=>C("custom"),className:`relative pb-2 ${s===3?"text-primary-purple":"text-primary-blue/70"}`,children:["Custom",s===3&&t.jsx("span",{className:"absolute left-0 -bottom-[2px] h-0.5 w-full bg-primary-purple rounded-full"})]})]}),s===3&&t.jsxs("div",{className:"mb-4",children:[t.jsx("h4",{className:"text-sm font-semibold text-primary-blue mb-2 mt-6",children:"Select custom seats"}),t.jsx("label",{className:"block text-xs text-primary-blue/70 mb-1",children:"Per seat: $20"}),t.jsx("input",{type:"range",min:5,max:500,step:5,value:n,onChange:e=>{const r=Number(e.target.value);B(r);const l=j("custom",u,r);d(p=>({...p,subscriptionSeats:r,subscriptionTotal:l.total,subscriptionTotalDisplay:l.display,subscriptionCurrency:l.currency,subscriptionPlanId:3,subscriptionBilling:u}))},className:"w-full accent-primary-purple"}),t.jsxs("div",{className:"flex justify-between text-xs text-primary-blue font-semibold mt-1 mb-6",children:[t.jsxs("span",{children:["Seats: ",n]}),t.jsxs("span",{children:["Total:"," ",u==="monthly"?`$${n*20}/mon`:u==="yearly"?`$${n*20*12}/yr`:"—"]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("div",{className:"text-xs text-primary-blue font-semibold mb-2",children:"Duration"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("button",{type:"button",onClick:()=>P("monthly"),className:`w-full rounded-xl sm:px-4 px-3 py-3 border text-left transition-all ${u==="monthly"?"bg-white border-primary-purple ring-2 ring-primary-purple/30":"bg-white border-primary-blue/20 hover:shadow-sm"}`,children:"Monthly"}),t.jsx("button",{type:"button",onClick:()=>P("yearly"),className:`w-full rounded-xl sm:px-4 px-3 py-3 border text-left transition-all ${u==="yearly"?"bg-white border-primary-purple ring-2 ring-primary-purple/30":"bg-white border-primary-blue/20 hover:shadow-sm"}`,children:"Yearly"})]})]})]}),s!==3&&t.jsx("div",{className:"grid grid-cols-2 gap-4",children:a?t.jsx(f,{id:"starter"}):t.jsxs(t.Fragment,{children:[t.jsx(f,{id:"starter"}),t.jsx(f,{id:"growth"})]})}),t.jsxs("div",{className:"mt-6",children:[t.jsx("div",{className:"text-xs text-primary-blue font-semibold mb-2",children:"Payment method"}),t.jsx("div",{className:"grid grid-cols-1 gap-3",children:t.jsx("div",{className:"w-full rounded-xl sm:px-4 px-3 py-3 border bg-white border-primary-purple ring-2 ring-primary-purple/30",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{className:"sm:text-sm text-xs font-semibold text-primary-blue",children:"Stripe"}),t.jsx("div",{className:"w-5 h-5 rounded-full border border-primary-purple flex items-center justify-center",children:t.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-primary-purple"})})]})})})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("div",{className:"text-xs text-primary-blue font-semibold mb-2",children:"Your selection"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[t.jsx("div",{className:"text-primary-blue/80",children:"Billing"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:s===3?u||"—":i}),t.jsx("div",{className:"text-primary-blue/80",children:"Plan"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:s===0?"Starter":s===1?"Growth":"Custom"}),t.jsx("div",{className:"text-primary-blue/80",children:"Seats"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:s===3?`Custom seats (${n})`:s===null?"—":s===0?a?"1":y.starter.baseSeats:y.growth.baseSeats}),t.jsx("div",{className:"text-primary-blue/80",children:"Payment"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:g}),t.jsx("div",{className:"text-primary-blue/80",children:"Amount"}),t.jsx("div",{className:"text-right text-primary-blue font-semibold",children:m.subscriptionTotalDisplay||"—"})]})]}),t.jsx("div",{className:"mt-6",children:t.jsx(L,{text:"Next : Add Card Details",onClick:D,disabled:s===null||s===3&&(!n||!u)})})]})})]})]})};export{Y as default};
