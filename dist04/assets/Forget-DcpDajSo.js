import{u as f,r as m,j as e}from"./index-BCafBE9j.js";import{S as h}from"./SideDesign-CeFCNFXV.js";import{B as y}from"./Button-Vrvrwh-z.js";import{m as j}from"./sms-DiCkCrsD.js";import{L as b,y as l}from"./ReactToastify-DOVchMts.js";const w="/api",S=()=>{const d=f(),[n,u]=m.useState({email:""}),[i,c]=m.useState(!1),p=r=>{const{name:a,value:t}=r.target;u(o=>({...o,[a]:t}))},x=async()=>{const r=n.email.trim();if(!r){l.error("Please enter your email");return}c(!0),localStorage.setItem("Email",r);try{const a=new FormData;a.append("email",r),a.append("role","company");const t=await fetch(`${w}/auth/send_otp/`,{method:"POST",body:a}),o=t.headers.get("content-type")||"";let s=null;if(o.includes("application/json"))try{s=await t.json()}catch{s=null}else try{s=await t.text()}catch{s=null}if(!t.ok){console.groupCollapsed(`‚ùå send_otp failed ${t.status} ${t.statusText}`),console.groupEnd();const g=s&&(s.error||s.detail||s.message)||(t.status===404?"No account found with this email":"Failed to send OTP");l.error(g);return}console.groupEnd(),l.success(typeof s=="string"?"OTP sent":s?.message||"OTP sent"),d("/PasswordVerification",{state:{email:r}})}catch(a){console.error("Forgot password error:",a),l.error("Network error. Please try again.")}finally{c(!1)}};return e.jsxs("div",{className:"grid md:grid-cols-5 w-full min-h-screen",children:[e.jsx(h,{}),e.jsx("div",{className:"md:col-span-3 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-lg",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 mb-8",children:[e.jsx("h1",{className:"text-primary-blue font-semibold sm:text-4xl text-3xl",children:"Forgot Password"}),e.jsx("p",{className:"text-xs text-gray-700 text-center",children:"Enter your email to receive a reset code"})]}),e.jsxs("form",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{htmlFor:"email",className:"block text-xs text-primary-blue font-medium mb-2",children:["Email Address",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-8 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("img",{src:j,alt:"email",className:"h-5 w-5"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,placeholder:"Enter your email address",value:n.email,onChange:p,className:"w-full pl-16 pr-4 py-5 rounded-full bg-white border border-gray-200 text-xs outline-none text-gray-800 placeholder-gray-400 focus:ring-2 focus:ring-primary-blue/20 focus:border-primary-blue/50"})]})]}),e.jsx(y,{text:i?"Sending...":"Reset Password",onClick:x,disabled:i})]})]})}),e.jsx(b,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})]})};export{S as default};
