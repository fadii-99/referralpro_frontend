import{u as H,r as a,R as B,j as e,H as R,b as z,c as M,d as W}from"./index-BCafBE9j.js";import{S as I}from"./SideDesign-CeFCNFXV.js";import{B as T}from"./Button-Vrvrwh-z.js";import{M as U}from"./MultiStepHeader-DaAxwEY8.js";import{L as F,y as o}from"./ReactToastify-DOVchMts.js";import{p as E,g as q,a as G,b as J,r as K}from"./metadata.max.json-CsV9usw-.js";const V=K,Y="/api",h=q().map(l=>({code:l,dialCode:`+${G(l)}`,name:new Intl.DisplayNames(["en"],{type:"region"}).of(l)||l})).sort((l,d)=>l.name.localeCompare(d.name)),re=()=>{const l=H(),d=a.useContext(B);if(!d)throw new Error("CompanyInformation must be used within RegistrationProvider");const{registrationData:r,setRegistrationData:O}=d,[b,y]=a.useState(r.address1),[f,w]=a.useState(r.address2),[c,j]=a.useState(r.city),[p,N]=a.useState(r.postCode),[m,v]=a.useState(r.website),[n,C]=a.useState("US"),[g,k]=a.useState(""),[P,S]=a.useState(!1);a.useEffect(()=>{if(y(r.address1),w(r.address2),j(r.city),N(r.postCode),v(r.website),r.phone){const t=E(r.phone);t&&(C(t.country||"PK"),k(t.nationalNumber.toString()))}},[r]);const L=async()=>{if(!b.trim()||!c.trim()||!p.trim()||!g.trim()){o.error("Please fill out all required fields.");return}if(!/^[0-9]+$/.test(p.trim())){o.error("Please enter a valid numeric postal code without spaces.");return}if(!/^[A-Za-z ]+$/.test(c.trim())){o.error("City name should only contain letters and spaces (no numbers or special characters).");return}if(m.trim()&&!/^www\.[^\s]+\.(com|org|net|edu|gov|mil|info|biz|xyz|online|io|ai|tech|app|dev)(\.[a-z]{2,3})?$/i.test(m.trim())){o.error("Please enter a valid website address (e.g., www.example.com or www.example.com.pk).");return}const A=`${h.find(s=>s.code===n)?.dialCode||""}${g}`,x=E(A);let u=null;try{const s=J(n,V);s&&(u=s.nationalNumber.toString().length)}catch{u=null}if(!x||!x.isValid()){const s=h.find(D=>D.code===n);let i=`Phone number for ${s?.name||n} must be valid.`;u&&(i=`Phone number for ${s?.name||n} must be valid and contain ${u} digits.`),o.error(i);return}try{const s=await fetch(`${Y}/auth/check_phone/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({phone:x.number})});if(s.status===200)O(i=>({...i,address1:b.trim(),address2:f.trim(),city:c.trim(),postCode:p.trim(),phone:x.number,website:m.trim()})),l("/PasswordCreation");else if(s.status===400)o.error("Phone number is already in use");else{const i=await s.text();o.error(`Phone check failed (${s.status}): ${i||"Unknown error"}`)}}catch(s){console.error(s),o.error("Network error while checking phone. Please try again.")}};return e.jsxs("div",{className:"grid md:grid-cols-5 w/full min-h-screen",children:[e.jsx(I,{}),e.jsxs("div",{className:"md:col-span-3 flex flex-col bg-[#F4F2FA]",children:[e.jsx("div",{className:"sticky top-5 z-30 backdrop-blur w-full max-w-lg mx-auto",children:e.jsx("div",{className:"px-4",children:e.jsx(U,{title:"Company Information",current:3,total:6,onBack:()=>l(-1)})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-lg space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:["Address Line 1 ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-primary-purple",children:e.jsx(R,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",placeholder:"Enter your address",value:b,onChange:t=>y(t.target.value),className:`w-full pl-12 pr-4 py-4 rounded-full bg-white border border-gray-200 \r
                              text-xs md:text-sm text-gray-800 placeholder-gray-400 outline-none`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:"Address Line 2"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-primary-purple",children:e.jsx(R,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",placeholder:"Enter your address",value:f,onChange:t=>w(t.target.value),className:`w-full pl-12 pr-4 py-4 rounded-full bg-white border border-gray-200 \r
                              text-xs md:text-sm text-gray-800 placeholder-gray-400 outline-none`})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:["City ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-primary-purple",children:e.jsx(z,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",placeholder:"Enter City",value:c,onChange:t=>j(t.target.value),className:`w-full pl-12 pr-4 py-4 rounded-full bg-white border border-gray-200 \r
                                text-xs md:text-sm text-gray-800 placeholder-gray-400 outline-none`})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:["Post Code ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-primary-purple",children:e.jsx(M,{className:"h-5 w-5"})}),e.jsx("input",{type:"text",placeholder:"Enter Post Code",value:p,onChange:t=>N(t.target.value),className:`w-full pl-12 pr-4 py-4 rounded-full bg-white border border-gray-200 \r
                                text-xs md:text-sm text-gray-800 placeholder-gray-400 outline-none`})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:["Business Phone Number ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative flex",children:[e.jsxs("button",{type:"button",onClick:()=>S(t=>!t),className:"pl-3 pr-8 py-4 rounded-l-full bg-white border border-gray-200 text-left text-xs md:text-sm text-gray-800 flex items-center",style:{minWidth:"100px",height:"48px"},children:[h.find(t=>t.code===n)?.dialCode||"+--",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`ml-8 h-3 w-3 text-gray-500 transition-transform ${P?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),e.jsx("input",{type:"tel",placeholder:"Enter Phone",value:g,onChange:t=>{const $=t.target.value.replace(/\D/g,"");k($)},className:"flex-1 pl-4 pr-4 py-4 rounded-r-full bg-white border border-gray-200 text-xs md:text-sm text-gray-800 placeholder-gray-400 outline-none",style:{height:"48px"}}),P&&e.jsx("ul",{className:"absolute top-full left-0 mt-1 w-72 bg-white border border-gray-200 rounded-2xl shadow-lg max-h-52 overflow-auto text-xs md:text-sm z-50",children:h.map(t=>e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>{C(t.code),S(!1)},className:"w-full flex justify-start gap-3 px-3 py-2 hover:bg-primary-purple/5",children:[e.jsx("span",{className:"font-semibold w-12",children:t.dialCode}),e.jsx("span",{children:t.name})]})},t.code))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:"Website"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-primary-purple",children:e.jsx(W,{className:"h-5 w-5"})}),e.jsx("input",{type:"url",placeholder:"Enter Website URL",value:m,onChange:t=>v(t.target.value),className:`w-full pl-12 pr-4 py-4 rounded-full bg-white border border-gray-200 \r
                            text-xs md:text-sm text-gray-800 placeholder-gray-400 outline-none`})]})]}),e.jsx(T,{text:"Next : Create Your Password",onClick:L})]})})]}),e.jsx(F,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})]})};export{re as default};
