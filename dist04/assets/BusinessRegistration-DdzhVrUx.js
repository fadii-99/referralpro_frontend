import{u as I,r,R as T,j as e}from"./index-BCafBE9j.js";import{S as V}from"./SideDesign-CeFCNFXV.js";import{B as H}from"./Button-Vrvrwh-z.js";import{M as J}from"./MultiStepHeader-DaAxwEY8.js";import{m as K}from"./sms-DiCkCrsD.js";import{c as F,I as E}from"./Category-DBMhr-0u.js";import{L as O,y as l}from"./ReactToastify-DOVchMts.js";const z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHvSURBVHgBvVQ7bBNBEH0zoHPsBMUoEhWga0IFigsKkCgOWgoC1YXKJZ1JZ1lIJk2S0nR0xA2yaHABLUkTQUFhFCpc5ESokFCMEmyDuB12YgXJd7lLHEV50kp383kzu/N2gRMGHRbweHY7n3UcT9h0gL/BcuN8kBbPac7Kw25pPOtsEtNrxplVRmaz4veqOE6HFX+3aOu9mJ4hXL8zCPv4TtD+JBAj95dejTcxSockVJqcIjx4xLh8hfbW/jeYS0l5iYRCVLh6I26/cNEWIymMTGgRbLXjxp8/bDHrw+iEUv/6RbD+Vv5b1t8MztCinpSVKpvK3G4NMjivsRzQ72p3pr7UmCgei1BR9nc8BntGKA8Km8uNc2tp8ak6VFGHIXUMJACZ1r4tLYeSiLKZTJVZiqKdxSArBn8WDro1McKyv+3aG7E6liNXZaO6U6kodMIbHwSf3+8NJjD4fTtKejZKyHCqVtDu3DxjcmrYp/9a4NZdYGUxdLu/nJo1zw7nx0CedhQlixJfmiYw0Uy8oSgELdWfbi8J378BW23dNq1FfbEtG6L5fk8Kz5+E7rWbBH0ctKNMdkCkwt6wZ6i3xa6FaP6BUy77PZdgnhLhHqJTJulYtmfdfq5Wa1LnSITD5DseGckLc54ZrcWXEy2cJv4B81euAVy1PKsAAAAASUVORK5CYII=",W="/api",Q=()=>{const x=I(),g=r.useContext(T);if(!g)throw new Error("BusinessRegistration must be used within <RegistrationProvider>");const{registrationData:s,setRegistrationData:L}=g,d=s.profileType==="company",[c,h]=r.useState(s.firstName||""),[m,y]=r.useState(s.lastName||""),[i,b]=r.useState(s.email||""),[n,f]=r.useState(s.industry||""),[p,j]=r.useState(s.companyName||""),[N,v]=r.useState(!1),[w,A]=r.useState(""),k=t=>t.trim().toLowerCase().replace(/â€“/g,"-"),C=Array.from(new Map(F.flatMap(t=>t.subcategories.map(a=>({subcategory:a.trim(),icon:t.icon}))).map(t=>[t.subcategory.toLowerCase(),t])).values()).sort((t,a)=>t.subcategory.localeCompare(a.subcategory)),B=k(w),S=C.filter(t=>B?k(t.subcategory).startsWith(B):!0);r.useEffect(()=>{h(s.firstName||""),y(s.lastName||""),b(s.email||""),f(s.industry||""),j(s.companyName||"")},[s]);const R=async()=>{const t=/^[^\s@]+@[^\s@]+\.(com|org|net|edu|gov|mil|info|biz|xyz|online|app|dev|io|ai|co|me|us|uk|pk|in|de|cn|au|ca|fr|jp|sg|my|ph|bd|sa|ae|qa|kw|om|nz|br|ru|es|it|nl|se|ch|no|dk|pl|be|id|hk|tw|vn|th|ng|ke|za|tr|ir|il|gr|ro|cz|hu|sk|si|hr|lt|lv|ee|fi|is|pt|ar|mx|cl|pe|ve|uy|kr|lk|np|mm|kh|la|mn|kz|uz|kg|tj|tm|af|iq|sy|jo|lb|ye|dz|ma|tn|gh|sn|ci|cm|ug|tz|rw|mw|zm|bw|na|mz|sz|sl|gm|gn|cd|cg|ao|et|sd|ss|bi|dj|er|so|bt|bn|mv|pg|fj|to|ws|vu|sb|pw|fm|tv|cc|gs|sh|aq|eh|ax|cat|mobi|name|jobs|tel|pro|travel|asia|coop|museum|aero|cat|int|post|gov|edu|law|bank|finance|insurance|capital|money|cash|loan|credit|fund|investments|markets|exchange|trading|shop|store|site|website|solutions|digital|media|design|agency|company|software|systems|support|services|technology|tech|cloud|space|host|hosting|server|network|email|chat|social|group|club|community|team|partners|global|world|earth|life|live|today|news|press|blog|wiki|docs|online|link|click|top|best|guru|ninja|zone|center|city|town|place|land|estate|realty|homes|house|property|rent|condos|apartments|school|college|university|academy|institute|training|education|courses|health|doctor|clinic|hospital|care|dental|pharmacy|fitness|diet|restaurant|cafe|bar|hotel|resort|vacations|travel|flights|holiday|pizza|beer|wine|coffee|food|recipes|kitchen|garden|tools|construction|builders|contractors|engineering|marketing|management|consulting|legal|lawyer|attorney|accountant|engineer|architect)$/i,a=/^[A-Za-z]+$/;if(!a.test(c.trim())){l.error("First name should contain only letters without spaces.");return}if(!a.test(m.trim())){l.error("Last name should contain only letters without spaces.");return}const U=!c.trim()||!m.trim()||!i.trim()||!n.trim(),M=d&&!p.trim();if(U||M){l.error("Please fill out all fields.");return}if(!t.test(i)){l.error("Please enter a valid email address");return}try{const o=await fetch(`${W}/auth/check_email/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:i.trim()})});if(o.status===200)L(u=>({...u,firstName:c.trim(),lastName:m.trim(),email:i.trim(),industry:n.trim(),companyName:d?p.trim():""})),x("/BusinessType");else if(o.status===400)l.error("Email is already registered.");else{const u=await o.text();l.error(`Failed (${o.status}): ${u||"Unknown error"}`)}}catch(o){console.error(o),l.error("Network error. Please try again.")}};return e.jsxs("div",{className:"grid md:grid-cols-5 w-full min-h-screen",children:[e.jsx(V,{}),e.jsxs("div",{className:"md:col-span-3 flex flex-col bg-[#F4F2FA]",children:[e.jsx("div",{className:"sticky top-5 z-30 backdrop-blur w-full max-w-lg mx-auto",children:e.jsx("div",{className:"px-4",children:e.jsx(J,{title:"Business Registration",current:1,total:6,onBack:()=>x(-1)})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-lg",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 w-full",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:["First Name ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("img",{src:z,alt:"",className:"h-5 w-5 object-contain"})}),e.jsx("input",{type:"text",placeholder:"Enter first name",value:c,onChange:t=>h(t.target.value),className:`w-full pl-12 pr-4 py-4 rounded-full bg-white border border-gray-200 text-xs md:text-sm\r
                                text-gray-800 placeholder-gray-400 outline-none`})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:["Last Name ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("img",{src:z,alt:"",className:"h-5 w-5 object-contain"})}),e.jsx("input",{type:"text",placeholder:"Enter last name",value:m,onChange:t=>y(t.target.value),className:`w-full pl-12 pr-4 py-4 rounded-full bg-white border border-gray-200 text-xs md:text-sm\r
                                text-gray-800 placeholder-gray-400 outline-none`})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:["Email ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("img",{src:K,alt:"",className:"h-5 w-5 object-contain"})}),e.jsx("input",{type:"email",required:!0,placeholder:"Enter your email",value:i,onChange:t=>b(t.target.value),className:`w-full pl-12 pr-4 py-4 rounded-full bg-white border border-gray-200 text-xs md:text-sm\r
                               text-gray-800 placeholder-gray-400 outline-none`})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:["Industry Selection ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none",children:n?e.jsx("img",{src:C.find(t=>t.subcategory===n)?.icon||E,alt:"",className:"h-5 w-5 object-contain"}):e.jsx("img",{src:E,alt:"",className:"h-5 w-5 object-contain"})}),e.jsx("button",{type:"button",onClick:()=>v(t=>!t),className:`w-full pl-12 pr-10 py-4 rounded-full bg-white border border-gray-200 text-left\r
                               text-xs md:text-sm text-gray-800 outline-none`,children:n||"Select your industry"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 transition-transform ${N?"rotate-180":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M6 9l6 6 6-6",strokeLinecap:"round",strokeLinejoin:"round"})})}),N&&e.jsxs("div",{className:`absolute z-30 mt-2 w-full bg-white border border-gray-200 \r
                                 rounded-2xl shadow-lg overflow-auto \r
                                 max-h-56 text-[11px] sm:text-sm`,children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-2",children:e.jsx("input",{type:"text",value:w,onChange:t=>{const a=t.target.value;/^[a-zA-Z\s]*$/.test(a)&&A(a)},placeholder:"Search an industry...",className:`w-full px-3 py-2 rounded-full bg-white border border-gray-200 text-xs md:text-sm\r
                                    text-gray-800 placeholder-gray-400 outline-none`})}),e.jsx("ul",{children:S.length>0?S.map(t=>e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>{f(t.subcategory),v(!1),A("")},className:`w-full flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2.5 
                                          hover:bg-primary-purple/10 ${n===t.subcategory?"bg-primary-purple/20":""}`,"aria-selected":n===t.subcategory,children:e.jsx("span",{className:"text-xs sm:text-sm",children:t.subcategory})})},t.subcategory)):e.jsx("li",{className:"px-4 py-2 text-gray-400 text-xs sm:text-sm",children:"No such category found"})})]})]})]}),d&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-[11px] text-primary-blue font-semibold mb-1.5",children:["Company Name ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary-purple",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21V9a2 2 0 012-2h2V5a2 2 0 012-2h6a2 2 0 012 2v2h2a2 2 0 012 2v12M9 21V9m6 12V9M3 21h18"})})}),e.jsx("input",{type:"text",placeholder:"Enter company name",value:p,onChange:t=>j(t.target.value),className:`w-full pl-12 pr-4 py-4 rounded-full bg-white border border-gray-200 text-xs md:text-sm\r
                                 text-gray-800 placeholder-gray-400 outline-none`})]})]})]}),e.jsx(H,{text:"Next : Business Type Selection",onClick:R})]})})]}),e.jsx(O,{position:"top-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0})]})};export{Q as default};
